{"ast":null,"code":"\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _ssrWindow = require(\"ssr-window\");\n\nvar _dom = _interopRequireDefault(require(\"../../utils/dom\"));\n\nvar _utils = require(\"../../utils/utils\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar Zoom = {\n  // Calc Scale From Multi-touches\n  getDistanceBetweenTouches: function getDistanceBetweenTouches(e) {\n    if (e.targetTouches.length < 2) return 1;\n    var x1 = e.targetTouches[0].pageX;\n    var y1 = e.targetTouches[0].pageY;\n    var x2 = e.targetTouches[1].pageX;\n    var y2 = e.targetTouches[1].pageY;\n    var distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    return distance;\n  },\n  // Events\n  onGestureStart: function onGestureStart(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n    zoom.fakeGestureTouched = false;\n    zoom.fakeGestureMoved = false;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchstart' || e.type === 'touchstart' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = true;\n      gesture.scaleStart = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$slideEl || !gesture.$slideEl.length) {\n      gesture.$slideEl = (0, _dom.default)(e.target).closest(\".\" + swiper.params.slideClass);\n      if (gesture.$slideEl.length === 0) gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n      gesture.maxRatio = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n      if (gesture.$imageWrapEl.length === 0) {\n        gesture.$imageEl = undefined;\n        return;\n      }\n    }\n\n    if (gesture.$imageEl) {\n      gesture.$imageEl.transition(0);\n    }\n\n    swiper.zoom.isScaling = true;\n  },\n  onGestureChange: function onGestureChange(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchmove' || e.type === 'touchmove' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureMoved = true;\n      gesture.scaleMove = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) {\n      if (e.type === 'gesturechange') zoom.onGestureStart(e);\n      return;\n    }\n\n    if (support.gestures) {\n      zoom.scale = e.scale * zoom.currentScale;\n    } else {\n      zoom.scale = gesture.scaleMove / gesture.scaleStart * zoom.currentScale;\n    }\n\n    if (zoom.scale > gesture.maxRatio) {\n      zoom.scale = gesture.maxRatio - 1 + Math.pow(zoom.scale - gesture.maxRatio + 1, 0.5);\n    }\n\n    if (zoom.scale < params.minRatio) {\n      zoom.scale = params.minRatio + 1 - Math.pow(params.minRatio - zoom.scale + 1, 0.5);\n    }\n\n    gesture.$imageEl.transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  onGestureEnd: function onGestureEnd(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (!zoom.fakeGestureTouched || !zoom.fakeGestureMoved) {\n        return;\n      }\n\n      if (e.type !== 'touchend' || e.type === 'touchend' && e.changedTouches.length < 2 && !device.android) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = false;\n      zoom.fakeGestureMoved = false;\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    zoom.scale = Math.max(Math.min(zoom.scale, gesture.maxRatio), params.minRatio);\n    gesture.$imageEl.transition(swiper.params.speed).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n    zoom.currentScale = zoom.scale;\n    zoom.isScaling = false;\n    if (zoom.scale === 1) gesture.$slideEl = undefined;\n  },\n  onTouchStart: function onTouchStart(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    if (image.isTouched) return;\n    if (device.android && e.cancelable) e.preventDefault();\n    image.isTouched = true;\n    image.touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n  },\n  onTouchMove: function onTouchMove(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    swiper.allowClick = false;\n    if (!image.isTouched || !gesture.$slideEl) return;\n\n    if (!image.isMoved) {\n      image.width = gesture.$imageEl[0].offsetWidth;\n      image.height = gesture.$imageEl[0].offsetHeight;\n      image.startX = (0, _utils.getTranslate)(gesture.$imageWrapEl[0], 'x') || 0;\n      image.startY = (0, _utils.getTranslate)(gesture.$imageWrapEl[0], 'y') || 0;\n      gesture.slideWidth = gesture.$slideEl[0].offsetWidth;\n      gesture.slideHeight = gesture.$slideEl[0].offsetHeight;\n      gesture.$imageWrapEl.transition(0);\n\n      if (swiper.rtl) {\n        image.startX = -image.startX;\n        image.startY = -image.startY;\n      }\n    } // Define if we need image drag\n\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    if (scaledWidth < gesture.slideWidth && scaledHeight < gesture.slideHeight) return;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.touchesCurrent.x = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesCurrent.y = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n    if (!image.isMoved && !zoom.isScaling) {\n      if (swiper.isHorizontal() && (Math.floor(image.minX) === Math.floor(image.startX) && image.touchesCurrent.x < image.touchesStart.x || Math.floor(image.maxX) === Math.floor(image.startX) && image.touchesCurrent.x > image.touchesStart.x)) {\n        image.isTouched = false;\n        return;\n      }\n\n      if (!swiper.isHorizontal() && (Math.floor(image.minY) === Math.floor(image.startY) && image.touchesCurrent.y < image.touchesStart.y || Math.floor(image.maxY) === Math.floor(image.startY) && image.touchesCurrent.y > image.touchesStart.y)) {\n        image.isTouched = false;\n        return;\n      }\n    }\n\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n\n    e.stopPropagation();\n    image.isMoved = true;\n    image.currentX = image.touchesCurrent.x - image.touchesStart.x + image.startX;\n    image.currentY = image.touchesCurrent.y - image.touchesStart.y + image.startY;\n\n    if (image.currentX < image.minX) {\n      image.currentX = image.minX + 1 - Math.pow(image.minX - image.currentX + 1, 0.8);\n    }\n\n    if (image.currentX > image.maxX) {\n      image.currentX = image.maxX - 1 + Math.pow(image.currentX - image.maxX + 1, 0.8);\n    }\n\n    if (image.currentY < image.minY) {\n      image.currentY = image.minY + 1 - Math.pow(image.minY - image.currentY + 1, 0.8);\n    }\n\n    if (image.currentY > image.maxY) {\n      image.currentY = image.maxY - 1 + Math.pow(image.currentY - image.maxY + 1, 0.8);\n    } // Velocity\n\n\n    if (!velocity.prevPositionX) velocity.prevPositionX = image.touchesCurrent.x;\n    if (!velocity.prevPositionY) velocity.prevPositionY = image.touchesCurrent.y;\n    if (!velocity.prevTime) velocity.prevTime = Date.now();\n    velocity.x = (image.touchesCurrent.x - velocity.prevPositionX) / (Date.now() - velocity.prevTime) / 2;\n    velocity.y = (image.touchesCurrent.y - velocity.prevPositionY) / (Date.now() - velocity.prevTime) / 2;\n    if (Math.abs(image.touchesCurrent.x - velocity.prevPositionX) < 2) velocity.x = 0;\n    if (Math.abs(image.touchesCurrent.y - velocity.prevPositionY) < 2) velocity.y = 0;\n    velocity.prevPositionX = image.touchesCurrent.x;\n    velocity.prevPositionY = image.touchesCurrent.y;\n    velocity.prevTime = Date.now();\n    gesture.$imageWrapEl.transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTouchEnd: function onTouchEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n\n    if (!image.isTouched || !image.isMoved) {\n      image.isTouched = false;\n      image.isMoved = false;\n      return;\n    }\n\n    image.isTouched = false;\n    image.isMoved = false;\n    var momentumDurationX = 300;\n    var momentumDurationY = 300;\n    var momentumDistanceX = velocity.x * momentumDurationX;\n    var newPositionX = image.currentX + momentumDistanceX;\n    var momentumDistanceY = velocity.y * momentumDurationY;\n    var newPositionY = image.currentY + momentumDistanceY; // Fix duration\n\n    if (velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - image.currentX) / velocity.x);\n    if (velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - image.currentY) / velocity.y);\n    var momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n    image.currentX = newPositionX;\n    image.currentY = newPositionY; // Define if we need image drag\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.currentX = Math.max(Math.min(image.currentX, image.maxX), image.minX);\n    image.currentY = Math.max(Math.min(image.currentY, image.maxY), image.minY);\n    gesture.$imageWrapEl.transition(momentumDuration).transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTransitionEnd: function onTransitionEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (gesture.$slideEl && swiper.previousIndex !== swiper.activeIndex) {\n      if (gesture.$imageEl) {\n        gesture.$imageEl.transform('translate3d(0,0,0) scale(1)');\n      }\n\n      if (gesture.$imageWrapEl) {\n        gesture.$imageWrapEl.transform('translate3d(0,0,0)');\n      }\n\n      zoom.scale = 1;\n      zoom.currentScale = 1;\n      gesture.$slideEl = undefined;\n      gesture.$imageEl = undefined;\n      gesture.$imageWrapEl = undefined;\n    }\n  },\n  // Toggle Zoom\n  toggle: function toggle(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n\n    if (zoom.scale && zoom.scale !== 1) {\n      // Zoom Out\n      zoom.out();\n    } else {\n      // Zoom In\n      zoom.in(e);\n    }\n  },\n  in: function _in(e) {\n    var swiper = this;\n    var window = (0, _ssrWindow.getWindow)();\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0 || !gesture.$imageWrapEl || gesture.$imageWrapEl.length === 0) return;\n    gesture.$slideEl.addClass(\"\" + params.zoomedSlideClass);\n    var touchX;\n    var touchY;\n    var offsetX;\n    var offsetY;\n    var diffX;\n    var diffY;\n    var translateX;\n    var translateY;\n    var imageWidth;\n    var imageHeight;\n    var scaledWidth;\n    var scaledHeight;\n    var translateMinX;\n    var translateMinY;\n    var translateMaxX;\n    var translateMaxY;\n    var slideWidth;\n    var slideHeight;\n\n    if (typeof image.touchesStart.x === 'undefined' && e) {\n      touchX = e.type === 'touchend' ? e.changedTouches[0].pageX : e.pageX;\n      touchY = e.type === 'touchend' ? e.changedTouches[0].pageY : e.pageY;\n    } else {\n      touchX = image.touchesStart.x;\n      touchY = image.touchesStart.y;\n    }\n\n    zoom.scale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n    zoom.currentScale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n    if (e) {\n      slideWidth = gesture.$slideEl[0].offsetWidth;\n      slideHeight = gesture.$slideEl[0].offsetHeight;\n      offsetX = gesture.$slideEl.offset().left + window.scrollX;\n      offsetY = gesture.$slideEl.offset().top + window.scrollY;\n      diffX = offsetX + slideWidth / 2 - touchX;\n      diffY = offsetY + slideHeight / 2 - touchY;\n      imageWidth = gesture.$imageEl[0].offsetWidth;\n      imageHeight = gesture.$imageEl[0].offsetHeight;\n      scaledWidth = imageWidth * zoom.scale;\n      scaledHeight = imageHeight * zoom.scale;\n      translateMinX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n      translateMinY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n      translateMaxX = -translateMinX;\n      translateMaxY = -translateMinY;\n      translateX = diffX * zoom.scale;\n      translateY = diffY * zoom.scale;\n\n      if (translateX < translateMinX) {\n        translateX = translateMinX;\n      }\n\n      if (translateX > translateMaxX) {\n        translateX = translateMaxX;\n      }\n\n      if (translateY < translateMinY) {\n        translateY = translateMinY;\n      }\n\n      if (translateY > translateMaxY) {\n        translateY = translateMaxY;\n      }\n    } else {\n      translateX = 0;\n      translateY = 0;\n    }\n\n    gesture.$imageWrapEl.transition(300).transform(\"translate3d(\" + translateX + \"px, \" + translateY + \"px,0)\");\n    gesture.$imageEl.transition(300).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  out: function out() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0 || !gesture.$imageWrapEl || gesture.$imageWrapEl.length === 0) return;\n    zoom.scale = 1;\n    zoom.currentScale = 1;\n    gesture.$imageWrapEl.transition(300).transform('translate3d(0,0,0)');\n    gesture.$imageEl.transition(300).transform('translate3d(0,0,0) scale(1)');\n    gesture.$slideEl.removeClass(\"\" + params.zoomedSlideClass);\n    gesture.$slideEl = undefined;\n  },\n  toggleGestures: function toggleGestures(method) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var selector = zoom.slideSelector,\n        passive = zoom.passiveListener;\n    swiper.$wrapperEl[method]('gesturestart', selector, zoom.onGestureStart, passive);\n    swiper.$wrapperEl[method]('gesturechange', selector, zoom.onGestureChange, passive);\n    swiper.$wrapperEl[method]('gestureend', selector, zoom.onGestureEnd, passive);\n  },\n  enableGestures: function enableGestures() {\n    if (this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = true;\n    this.zoom.toggleGestures('on');\n  },\n  disableGestures: function disableGestures() {\n    if (!this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = false;\n    this.zoom.toggleGestures('off');\n  },\n  // Attach/Detach Events\n  enable: function enable() {\n    var swiper = this;\n    var support = swiper.support;\n    var zoom = swiper.zoom;\n    if (zoom.enabled) return;\n    zoom.enabled = true;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass;\n    swiper.zoom.passiveListener = passiveListener;\n    swiper.zoom.slideSelector = slideSelector; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.on(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.on(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  },\n  disable: function disable() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    if (!zoom.enabled) return;\n    var support = swiper.support;\n    swiper.zoom.enabled = false;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.off(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.off(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  }\n};\nvar _default = {\n  name: 'zoom',\n  params: {\n    zoom: {\n      enabled: false,\n      maxRatio: 3,\n      minRatio: 1,\n      toggle: true,\n      containerClass: 'swiper-zoom-container',\n      zoomedSlideClass: 'swiper-slide-zoomed'\n    }\n  },\n  create: function create() {\n    var swiper = this;\n    (0, _utils.bindModuleMethods)(swiper, {\n      zoom: _extends({\n        enabled: false,\n        scale: 1,\n        currentScale: 1,\n        isScaling: false,\n        gesture: {\n          $slideEl: undefined,\n          slideWidth: undefined,\n          slideHeight: undefined,\n          $imageEl: undefined,\n          $imageWrapEl: undefined,\n          maxRatio: 3\n        },\n        image: {\n          isTouched: undefined,\n          isMoved: undefined,\n          currentX: undefined,\n          currentY: undefined,\n          minX: undefined,\n          minY: undefined,\n          maxX: undefined,\n          maxY: undefined,\n          width: undefined,\n          height: undefined,\n          startX: undefined,\n          startY: undefined,\n          touchesStart: {},\n          touchesCurrent: {}\n        },\n        velocity: {\n          x: undefined,\n          y: undefined,\n          prevPositionX: undefined,\n          prevPositionY: undefined,\n          prevTime: undefined\n        }\n      }, Zoom)\n    });\n    var scale = 1;\n    Object.defineProperty(swiper.zoom, 'scale', {\n      get: function get() {\n        return scale;\n      },\n      set: function set(value) {\n        if (scale !== value) {\n          var imageEl = swiper.zoom.gesture.$imageEl ? swiper.zoom.gesture.$imageEl[0] : undefined;\n          var slideEl = swiper.zoom.gesture.$slideEl ? swiper.zoom.gesture.$slideEl[0] : undefined;\n          swiper.emit('zoomChange', value, imageEl, slideEl);\n        }\n\n        scale = value;\n      }\n    });\n  },\n  on: {\n    init: function init(swiper) {\n      if (swiper.params.zoom.enabled) {\n        swiper.zoom.enable();\n      }\n    },\n    destroy: function destroy(swiper) {\n      swiper.zoom.disable();\n    },\n    touchStart: function touchStart(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchStart(e);\n    },\n    touchEnd: function touchEnd(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchEnd(e);\n    },\n    doubleTap: function doubleTap(swiper, e) {\n      if (!swiper.animating && swiper.params.zoom.enabled && swiper.zoom.enabled && swiper.params.zoom.toggle) {\n        swiper.zoom.toggle(e);\n      }\n    },\n    transitionEnd: function transitionEnd(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled) {\n        swiper.zoom.onTransitionEnd();\n      }\n    },\n    slideChange: function slideChange(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled && swiper.params.cssMode) {\n        swiper.zoom.onTransitionEnd();\n      }\n    }\n  }\n};\nexports.default = _default;","map":{"version":3,"sources":["C:/Users/hasss/Documents/ReactProjects/GLMarketplace/marketplace/node_modules/swiper/cjs/components/zoom/zoom.js"],"names":["exports","__esModule","default","_ssrWindow","require","_dom","_interopRequireDefault","_utils","obj","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","Zoom","getDistanceBetweenTouches","e","targetTouches","x1","pageX","y1","pageY","x2","y2","distance","Math","sqrt","pow","onGestureStart","swiper","support","params","zoom","gesture","fakeGestureTouched","fakeGestureMoved","gestures","type","scaleStart","$slideEl","closest","slideClass","slides","eq","activeIndex","$imageEl","find","$imageWrapEl","parent","containerClass","maxRatio","attr","undefined","transition","isScaling","onGestureChange","scaleMove","scale","currentScale","minRatio","transform","onGestureEnd","device","changedTouches","android","max","min","speed","onTouchStart","image","isTouched","cancelable","preventDefault","touchesStart","x","y","onTouchMove","velocity","allowClick","isMoved","width","offsetWidth","height","offsetHeight","startX","getTranslate","startY","slideWidth","slideHeight","rtl","scaledWidth","scaledHeight","minX","maxX","minY","maxY","touchesCurrent","isHorizontal","floor","stopPropagation","currentX","currentY","prevPositionX","prevPositionY","prevTime","Date","now","abs","onTouchEnd","momentumDurationX","momentumDurationY","momentumDistanceX","newPositionX","momentumDistanceY","newPositionY","momentumDuration","onTransitionEnd","previousIndex","toggle","out","in","_in","window","getWindow","virtual","enabled","$wrapperEl","children","slideActiveClass","addClass","zoomedSlideClass","touchX","touchY","offsetX","offsetY","diffX","diffY","translateX","translateY","imageWidth","imageHeight","translateMinX","translateMinY","translateMaxX","translateMaxY","offset","left","scrollX","top","scrollY","removeClass","toggleGestures","method","selector","slideSelector","passive","passiveListener","enableGestures","gesturesEnabled","disableGestures","enable","touchEvents","start","passiveListeners","capture","activeListenerWithCapture","on","end","move","cancel","disable","off","_default","name","create","bindModuleMethods","defineProperty","get","set","value","imageEl","slideEl","emit","init","destroy","touchStart","touchEnd","doubleTap","animating","transitionEnd","slideChange","cssMode"],"mappings":"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","sourcesContent":["\"use strict\";\n\nexports.__esModule = true;\nexports.default = void 0;\n\nvar _ssrWindow = require(\"ssr-window\");\n\nvar _dom = _interopRequireDefault(require(\"../../utils/dom\"));\n\nvar _utils = require(\"../../utils/utils\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar Zoom = {\n  // Calc Scale From Multi-touches\n  getDistanceBetweenTouches: function getDistanceBetweenTouches(e) {\n    if (e.targetTouches.length < 2) return 1;\n    var x1 = e.targetTouches[0].pageX;\n    var y1 = e.targetTouches[0].pageY;\n    var x2 = e.targetTouches[1].pageX;\n    var y2 = e.targetTouches[1].pageY;\n    var distance = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n    return distance;\n  },\n  // Events\n  onGestureStart: function onGestureStart(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n    zoom.fakeGestureTouched = false;\n    zoom.fakeGestureMoved = false;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchstart' || e.type === 'touchstart' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = true;\n      gesture.scaleStart = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$slideEl || !gesture.$slideEl.length) {\n      gesture.$slideEl = (0, _dom.default)(e.target).closest(\".\" + swiper.params.slideClass);\n      if (gesture.$slideEl.length === 0) gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n      gesture.maxRatio = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n      if (gesture.$imageWrapEl.length === 0) {\n        gesture.$imageEl = undefined;\n        return;\n      }\n    }\n\n    if (gesture.$imageEl) {\n      gesture.$imageEl.transition(0);\n    }\n\n    swiper.zoom.isScaling = true;\n  },\n  onGestureChange: function onGestureChange(e) {\n    var swiper = this;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (e.type !== 'touchmove' || e.type === 'touchmove' && e.targetTouches.length < 2) {\n        return;\n      }\n\n      zoom.fakeGestureMoved = true;\n      gesture.scaleMove = Zoom.getDistanceBetweenTouches(e);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) {\n      if (e.type === 'gesturechange') zoom.onGestureStart(e);\n      return;\n    }\n\n    if (support.gestures) {\n      zoom.scale = e.scale * zoom.currentScale;\n    } else {\n      zoom.scale = gesture.scaleMove / gesture.scaleStart * zoom.currentScale;\n    }\n\n    if (zoom.scale > gesture.maxRatio) {\n      zoom.scale = gesture.maxRatio - 1 + Math.pow(zoom.scale - gesture.maxRatio + 1, 0.5);\n    }\n\n    if (zoom.scale < params.minRatio) {\n      zoom.scale = params.minRatio + 1 - Math.pow(params.minRatio - zoom.scale + 1, 0.5);\n    }\n\n    gesture.$imageEl.transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  onGestureEnd: function onGestureEnd(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var support = swiper.support;\n    var params = swiper.params.zoom;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (!support.gestures) {\n      if (!zoom.fakeGestureTouched || !zoom.fakeGestureMoved) {\n        return;\n      }\n\n      if (e.type !== 'touchend' || e.type === 'touchend' && e.changedTouches.length < 2 && !device.android) {\n        return;\n      }\n\n      zoom.fakeGestureTouched = false;\n      zoom.fakeGestureMoved = false;\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    zoom.scale = Math.max(Math.min(zoom.scale, gesture.maxRatio), params.minRatio);\n    gesture.$imageEl.transition(swiper.params.speed).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n    zoom.currentScale = zoom.scale;\n    zoom.isScaling = false;\n    if (zoom.scale === 1) gesture.$slideEl = undefined;\n  },\n  onTouchStart: function onTouchStart(e) {\n    var swiper = this;\n    var device = swiper.device;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    if (image.isTouched) return;\n    if (device.android && e.cancelable) e.preventDefault();\n    image.isTouched = true;\n    image.touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n  },\n  onTouchMove: function onTouchMove(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n    swiper.allowClick = false;\n    if (!image.isTouched || !gesture.$slideEl) return;\n\n    if (!image.isMoved) {\n      image.width = gesture.$imageEl[0].offsetWidth;\n      image.height = gesture.$imageEl[0].offsetHeight;\n      image.startX = (0, _utils.getTranslate)(gesture.$imageWrapEl[0], 'x') || 0;\n      image.startY = (0, _utils.getTranslate)(gesture.$imageWrapEl[0], 'y') || 0;\n      gesture.slideWidth = gesture.$slideEl[0].offsetWidth;\n      gesture.slideHeight = gesture.$slideEl[0].offsetHeight;\n      gesture.$imageWrapEl.transition(0);\n\n      if (swiper.rtl) {\n        image.startX = -image.startX;\n        image.startY = -image.startY;\n      }\n    } // Define if we need image drag\n\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    if (scaledWidth < gesture.slideWidth && scaledHeight < gesture.slideHeight) return;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.touchesCurrent.x = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n    image.touchesCurrent.y = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n\n    if (!image.isMoved && !zoom.isScaling) {\n      if (swiper.isHorizontal() && (Math.floor(image.minX) === Math.floor(image.startX) && image.touchesCurrent.x < image.touchesStart.x || Math.floor(image.maxX) === Math.floor(image.startX) && image.touchesCurrent.x > image.touchesStart.x)) {\n        image.isTouched = false;\n        return;\n      }\n\n      if (!swiper.isHorizontal() && (Math.floor(image.minY) === Math.floor(image.startY) && image.touchesCurrent.y < image.touchesStart.y || Math.floor(image.maxY) === Math.floor(image.startY) && image.touchesCurrent.y > image.touchesStart.y)) {\n        image.isTouched = false;\n        return;\n      }\n    }\n\n    if (e.cancelable) {\n      e.preventDefault();\n    }\n\n    e.stopPropagation();\n    image.isMoved = true;\n    image.currentX = image.touchesCurrent.x - image.touchesStart.x + image.startX;\n    image.currentY = image.touchesCurrent.y - image.touchesStart.y + image.startY;\n\n    if (image.currentX < image.minX) {\n      image.currentX = image.minX + 1 - Math.pow(image.minX - image.currentX + 1, 0.8);\n    }\n\n    if (image.currentX > image.maxX) {\n      image.currentX = image.maxX - 1 + Math.pow(image.currentX - image.maxX + 1, 0.8);\n    }\n\n    if (image.currentY < image.minY) {\n      image.currentY = image.minY + 1 - Math.pow(image.minY - image.currentY + 1, 0.8);\n    }\n\n    if (image.currentY > image.maxY) {\n      image.currentY = image.maxY - 1 + Math.pow(image.currentY - image.maxY + 1, 0.8);\n    } // Velocity\n\n\n    if (!velocity.prevPositionX) velocity.prevPositionX = image.touchesCurrent.x;\n    if (!velocity.prevPositionY) velocity.prevPositionY = image.touchesCurrent.y;\n    if (!velocity.prevTime) velocity.prevTime = Date.now();\n    velocity.x = (image.touchesCurrent.x - velocity.prevPositionX) / (Date.now() - velocity.prevTime) / 2;\n    velocity.y = (image.touchesCurrent.y - velocity.prevPositionY) / (Date.now() - velocity.prevTime) / 2;\n    if (Math.abs(image.touchesCurrent.x - velocity.prevPositionX) < 2) velocity.x = 0;\n    if (Math.abs(image.touchesCurrent.y - velocity.prevPositionY) < 2) velocity.y = 0;\n    velocity.prevPositionX = image.touchesCurrent.x;\n    velocity.prevPositionY = image.touchesCurrent.y;\n    velocity.prevTime = Date.now();\n    gesture.$imageWrapEl.transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTouchEnd: function onTouchEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image,\n        velocity = zoom.velocity;\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0) return;\n\n    if (!image.isTouched || !image.isMoved) {\n      image.isTouched = false;\n      image.isMoved = false;\n      return;\n    }\n\n    image.isTouched = false;\n    image.isMoved = false;\n    var momentumDurationX = 300;\n    var momentumDurationY = 300;\n    var momentumDistanceX = velocity.x * momentumDurationX;\n    var newPositionX = image.currentX + momentumDistanceX;\n    var momentumDistanceY = velocity.y * momentumDurationY;\n    var newPositionY = image.currentY + momentumDistanceY; // Fix duration\n\n    if (velocity.x !== 0) momentumDurationX = Math.abs((newPositionX - image.currentX) / velocity.x);\n    if (velocity.y !== 0) momentumDurationY = Math.abs((newPositionY - image.currentY) / velocity.y);\n    var momentumDuration = Math.max(momentumDurationX, momentumDurationY);\n    image.currentX = newPositionX;\n    image.currentY = newPositionY; // Define if we need image drag\n\n    var scaledWidth = image.width * zoom.scale;\n    var scaledHeight = image.height * zoom.scale;\n    image.minX = Math.min(gesture.slideWidth / 2 - scaledWidth / 2, 0);\n    image.maxX = -image.minX;\n    image.minY = Math.min(gesture.slideHeight / 2 - scaledHeight / 2, 0);\n    image.maxY = -image.minY;\n    image.currentX = Math.max(Math.min(image.currentX, image.maxX), image.minX);\n    image.currentY = Math.max(Math.min(image.currentY, image.maxY), image.minY);\n    gesture.$imageWrapEl.transition(momentumDuration).transform(\"translate3d(\" + image.currentX + \"px, \" + image.currentY + \"px,0)\");\n  },\n  onTransitionEnd: function onTransitionEnd() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var gesture = zoom.gesture;\n\n    if (gesture.$slideEl && swiper.previousIndex !== swiper.activeIndex) {\n      if (gesture.$imageEl) {\n        gesture.$imageEl.transform('translate3d(0,0,0) scale(1)');\n      }\n\n      if (gesture.$imageWrapEl) {\n        gesture.$imageWrapEl.transform('translate3d(0,0,0)');\n      }\n\n      zoom.scale = 1;\n      zoom.currentScale = 1;\n      gesture.$slideEl = undefined;\n      gesture.$imageEl = undefined;\n      gesture.$imageWrapEl = undefined;\n    }\n  },\n  // Toggle Zoom\n  toggle: function toggle(e) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n\n    if (zoom.scale && zoom.scale !== 1) {\n      // Zoom Out\n      zoom.out();\n    } else {\n      // Zoom In\n      zoom.in(e);\n    }\n  },\n  in: function _in(e) {\n    var swiper = this;\n    var window = (0, _ssrWindow.getWindow)();\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture,\n        image = zoom.image;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0 || !gesture.$imageWrapEl || gesture.$imageWrapEl.length === 0) return;\n    gesture.$slideEl.addClass(\"\" + params.zoomedSlideClass);\n    var touchX;\n    var touchY;\n    var offsetX;\n    var offsetY;\n    var diffX;\n    var diffY;\n    var translateX;\n    var translateY;\n    var imageWidth;\n    var imageHeight;\n    var scaledWidth;\n    var scaledHeight;\n    var translateMinX;\n    var translateMinY;\n    var translateMaxX;\n    var translateMaxY;\n    var slideWidth;\n    var slideHeight;\n\n    if (typeof image.touchesStart.x === 'undefined' && e) {\n      touchX = e.type === 'touchend' ? e.changedTouches[0].pageX : e.pageX;\n      touchY = e.type === 'touchend' ? e.changedTouches[0].pageY : e.pageY;\n    } else {\n      touchX = image.touchesStart.x;\n      touchY = image.touchesStart.y;\n    }\n\n    zoom.scale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n    zoom.currentScale = gesture.$imageWrapEl.attr('data-swiper-zoom') || params.maxRatio;\n\n    if (e) {\n      slideWidth = gesture.$slideEl[0].offsetWidth;\n      slideHeight = gesture.$slideEl[0].offsetHeight;\n      offsetX = gesture.$slideEl.offset().left + window.scrollX;\n      offsetY = gesture.$slideEl.offset().top + window.scrollY;\n      diffX = offsetX + slideWidth / 2 - touchX;\n      diffY = offsetY + slideHeight / 2 - touchY;\n      imageWidth = gesture.$imageEl[0].offsetWidth;\n      imageHeight = gesture.$imageEl[0].offsetHeight;\n      scaledWidth = imageWidth * zoom.scale;\n      scaledHeight = imageHeight * zoom.scale;\n      translateMinX = Math.min(slideWidth / 2 - scaledWidth / 2, 0);\n      translateMinY = Math.min(slideHeight / 2 - scaledHeight / 2, 0);\n      translateMaxX = -translateMinX;\n      translateMaxY = -translateMinY;\n      translateX = diffX * zoom.scale;\n      translateY = diffY * zoom.scale;\n\n      if (translateX < translateMinX) {\n        translateX = translateMinX;\n      }\n\n      if (translateX > translateMaxX) {\n        translateX = translateMaxX;\n      }\n\n      if (translateY < translateMinY) {\n        translateY = translateMinY;\n      }\n\n      if (translateY > translateMaxY) {\n        translateY = translateMaxY;\n      }\n    } else {\n      translateX = 0;\n      translateY = 0;\n    }\n\n    gesture.$imageWrapEl.transition(300).transform(\"translate3d(\" + translateX + \"px, \" + translateY + \"px,0)\");\n    gesture.$imageEl.transition(300).transform(\"translate3d(0,0,0) scale(\" + zoom.scale + \")\");\n  },\n  out: function out() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var params = swiper.params.zoom;\n    var gesture = zoom.gesture;\n\n    if (!gesture.$slideEl) {\n      if (swiper.params.virtual && swiper.params.virtual.enabled && swiper.virtual) {\n        gesture.$slideEl = swiper.$wrapperEl.children(\".\" + swiper.params.slideActiveClass);\n      } else {\n        gesture.$slideEl = swiper.slides.eq(swiper.activeIndex);\n      }\n\n      gesture.$imageEl = gesture.$slideEl.find('img, svg, canvas, picture, .swiper-zoom-target');\n      gesture.$imageWrapEl = gesture.$imageEl.parent(\".\" + params.containerClass);\n    }\n\n    if (!gesture.$imageEl || gesture.$imageEl.length === 0 || !gesture.$imageWrapEl || gesture.$imageWrapEl.length === 0) return;\n    zoom.scale = 1;\n    zoom.currentScale = 1;\n    gesture.$imageWrapEl.transition(300).transform('translate3d(0,0,0)');\n    gesture.$imageEl.transition(300).transform('translate3d(0,0,0) scale(1)');\n    gesture.$slideEl.removeClass(\"\" + params.zoomedSlideClass);\n    gesture.$slideEl = undefined;\n  },\n  toggleGestures: function toggleGestures(method) {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    var selector = zoom.slideSelector,\n        passive = zoom.passiveListener;\n    swiper.$wrapperEl[method]('gesturestart', selector, zoom.onGestureStart, passive);\n    swiper.$wrapperEl[method]('gesturechange', selector, zoom.onGestureChange, passive);\n    swiper.$wrapperEl[method]('gestureend', selector, zoom.onGestureEnd, passive);\n  },\n  enableGestures: function enableGestures() {\n    if (this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = true;\n    this.zoom.toggleGestures('on');\n  },\n  disableGestures: function disableGestures() {\n    if (!this.zoom.gesturesEnabled) return;\n    this.zoom.gesturesEnabled = false;\n    this.zoom.toggleGestures('off');\n  },\n  // Attach/Detach Events\n  enable: function enable() {\n    var swiper = this;\n    var support = swiper.support;\n    var zoom = swiper.zoom;\n    if (zoom.enabled) return;\n    zoom.enabled = true;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass;\n    swiper.zoom.passiveListener = passiveListener;\n    swiper.zoom.slideSelector = slideSelector; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.on(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.on(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.on(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.on(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.on(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  },\n  disable: function disable() {\n    var swiper = this;\n    var zoom = swiper.zoom;\n    if (!zoom.enabled) return;\n    var support = swiper.support;\n    swiper.zoom.enabled = false;\n    var passiveListener = swiper.touchEvents.start === 'touchstart' && support.passiveListener && swiper.params.passiveListeners ? {\n      passive: true,\n      capture: false\n    } : false;\n    var activeListenerWithCapture = support.passiveListener ? {\n      passive: false,\n      capture: true\n    } : true;\n    var slideSelector = \".\" + swiper.params.slideClass; // Scale image\n\n    if (support.gestures) {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, swiper.zoom.enableGestures, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, swiper.zoom.disableGestures, passiveListener);\n    } else if (swiper.touchEvents.start === 'touchstart') {\n      swiper.$wrapperEl.off(swiper.touchEvents.start, slideSelector, zoom.onGestureStart, passiveListener);\n      swiper.$wrapperEl.off(swiper.touchEvents.move, slideSelector, zoom.onGestureChange, activeListenerWithCapture);\n      swiper.$wrapperEl.off(swiper.touchEvents.end, slideSelector, zoom.onGestureEnd, passiveListener);\n\n      if (swiper.touchEvents.cancel) {\n        swiper.$wrapperEl.off(swiper.touchEvents.cancel, slideSelector, zoom.onGestureEnd, passiveListener);\n      }\n    } // Move image\n\n\n    swiper.$wrapperEl.off(swiper.touchEvents.move, \".\" + swiper.params.zoom.containerClass, zoom.onTouchMove, activeListenerWithCapture);\n  }\n};\nvar _default = {\n  name: 'zoom',\n  params: {\n    zoom: {\n      enabled: false,\n      maxRatio: 3,\n      minRatio: 1,\n      toggle: true,\n      containerClass: 'swiper-zoom-container',\n      zoomedSlideClass: 'swiper-slide-zoomed'\n    }\n  },\n  create: function create() {\n    var swiper = this;\n    (0, _utils.bindModuleMethods)(swiper, {\n      zoom: _extends({\n        enabled: false,\n        scale: 1,\n        currentScale: 1,\n        isScaling: false,\n        gesture: {\n          $slideEl: undefined,\n          slideWidth: undefined,\n          slideHeight: undefined,\n          $imageEl: undefined,\n          $imageWrapEl: undefined,\n          maxRatio: 3\n        },\n        image: {\n          isTouched: undefined,\n          isMoved: undefined,\n          currentX: undefined,\n          currentY: undefined,\n          minX: undefined,\n          minY: undefined,\n          maxX: undefined,\n          maxY: undefined,\n          width: undefined,\n          height: undefined,\n          startX: undefined,\n          startY: undefined,\n          touchesStart: {},\n          touchesCurrent: {}\n        },\n        velocity: {\n          x: undefined,\n          y: undefined,\n          prevPositionX: undefined,\n          prevPositionY: undefined,\n          prevTime: undefined\n        }\n      }, Zoom)\n    });\n    var scale = 1;\n    Object.defineProperty(swiper.zoom, 'scale', {\n      get: function get() {\n        return scale;\n      },\n      set: function set(value) {\n        if (scale !== value) {\n          var imageEl = swiper.zoom.gesture.$imageEl ? swiper.zoom.gesture.$imageEl[0] : undefined;\n          var slideEl = swiper.zoom.gesture.$slideEl ? swiper.zoom.gesture.$slideEl[0] : undefined;\n          swiper.emit('zoomChange', value, imageEl, slideEl);\n        }\n\n        scale = value;\n      }\n    });\n  },\n  on: {\n    init: function init(swiper) {\n      if (swiper.params.zoom.enabled) {\n        swiper.zoom.enable();\n      }\n    },\n    destroy: function destroy(swiper) {\n      swiper.zoom.disable();\n    },\n    touchStart: function touchStart(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchStart(e);\n    },\n    touchEnd: function touchEnd(swiper, e) {\n      if (!swiper.zoom.enabled) return;\n      swiper.zoom.onTouchEnd(e);\n    },\n    doubleTap: function doubleTap(swiper, e) {\n      if (!swiper.animating && swiper.params.zoom.enabled && swiper.zoom.enabled && swiper.params.zoom.toggle) {\n        swiper.zoom.toggle(e);\n      }\n    },\n    transitionEnd: function transitionEnd(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled) {\n        swiper.zoom.onTransitionEnd();\n      }\n    },\n    slideChange: function slideChange(swiper) {\n      if (swiper.zoom.enabled && swiper.params.zoom.enabled && swiper.params.cssMode) {\n        swiper.zoom.onTransitionEnd();\n      }\n    }\n  }\n};\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}